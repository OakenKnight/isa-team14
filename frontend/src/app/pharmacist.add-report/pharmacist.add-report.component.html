<mat-drawer-container class="example-container" autosize style="position: absolute;right: 0px;left: 0px;bottom: 0px;top: 0px; background: transparent;" hasBackdrop="true" >
    <mat-drawer style="width: 20%; height: 100%; background-color: #385399;" #drawer mode ="side">
        <mat-action-list ><button mat-list-item routerLink="/dashboard">  
            <i class="material-icons">dashboard</i>
            <p class="list-p">Dashboard</p>
            </button>
            <button mat-list-item routerLink="/add-report">  
                    <i class="material-icons">alarm</i>
                    <p class="list-p">Counselings</p>
            </button>
            <button mat-list-item routerLink="/employee-calendar"> 
        
                <i class="material-icons">calendar_today</i>
                <p class="list-p">Calendar</p>
            </button>
            <button mat-list-item routerLink="/appointment-report"> 
            
                <i class="material-icons">article</i>
                <p class="list-p">Counseling reports</p>
            </button>
            <button mat-list-item routerLink="/patients-overview"> 
                
                <i class="material-icons">group</i>
                <p class="list-p">Patients</p>
            </button>
            <button mat-list-item routerLink="/employee-medications"> 
                
                <i class="material-icons">medication</i>
                <p class="list-p">Medications</p>
            </button>
        </mat-action-list>
        <mat-action-list style="position: absolute; width: 100%; bottom : 1px;">
        <button mat-list-item routerLink="/employee-profile"> 
              
                <i class="material-icons">person</i>
                <p class="list-p">Profile</p>
            </button>
            <button  mat-list-item (click)='logout()'> 
                <i class="material-icons">logout</i>
                <p class="list-p">Logout</p>
            </button>
          </mat-action-list>
    </mat-drawer>
      <mat-drawer-content>
        <mat-toolbar style="background-color: #385399;">
            <button mat-icon-button class="example-icon" (click)="drawer.toggle()" >
              <mat-icon>menu</mat-icon>
            </button>
            <span>Add reports</span>
            <span class="example-spacer"></span>
          </mat-toolbar>
          
        <mat-card style="height: fit-content; width: 1000px; justify-content: center;">
            <mat-card-header>
                <mat-card-title>
                    Counselings for date: {{todaysDate}}
                </mat-card-title>
            </mat-card-header>
        </mat-card>
        <mat-card style="height: fit-content; width: 1000px; justify-content: center;">
            <mat-tab-group style="height: fit-content; width: 950px; margin-left: 10px; justify-content: center;">
                <div *ngFor="let a of appointments">
                <mat-tab [label]="a.startDateString"> 
                    
                    <div style="margin-top: 20px;">
                        <mat-label style="margin-top: 20px; font-size: 18px;"> {{a.patientName}}</mat-label>
                    </div>
                         
                                

                    <mat-form-field class="example-full-width" style="width: 100%; margin-top: 50px;">
                        <mat-label>Counseling info</mat-label>
                        <textarea matInput placeholder="Patient has..."></textarea>
                    </mat-form-field>

                    <mat-accordion class="example-headers-align" multi>
                        <mat-expansion-panel  style="margin-top:20px;" >
                            <mat-expansion-panel-header>
                              <mat-panel-title>
                                Prescribe medications
                              </mat-panel-title>
                              
                            </mat-expansion-panel-header>            
                        <div class="container" id="tableContainer">
                            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                                <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef> No. </th>
                                    <td mat-cell *matCellDef="let element; index as i"> {{i+1}} </td>
                                    </ng-container>
                                        
                                <ng-container matColumnDef="name">
                                    <th mat-header-cell *matHeaderCellDef> Name </th>
                                    <td mat-cell *matCellDef="let element" style="padding: 10px;"> {{element.name}} </td>
                                </ng-container>
                                        
                                <ng-container matColumnDef="dosage" style="width:100px !important">
                                    <th mat-header-cell *matHeaderCellDef> Dosage </th>
                                    <td mat-cell *matCellDef="let element"> 
                                        <mat-form-field style="width: 100%;">
                                            <mat-label>Dosage</mat-label>
                                            <input matInput type="number" value="8" placeholder="Hours" style="width:100px !important">
                                        </mat-form-field>

                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="#" style="margin-left: 80px;">
                                    <th mat-header-cell *matHeaderCellDef> # </th>
                                    <td mat-cell *matCellDef="let element"> 
                                        <button mat-raised-button color="primary" id="button" (click)="prescribeMedication()"  >Prescribe</button>
                                    </td>
                                </ng-container>
                                        
                                        
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-accordion class="example-headers-align" multi>
                    <mat-expansion-panel  style="margin-top:20px;" >
                        <mat-expansion-panel-header>
                          <mat-panel-title>
                            Schedule next counseling
                          </mat-panel-title>
                        </mat-expansion-panel-header>  
                        <form [formGroup]="searchAppointmentForm" (ngSubmit)="searchAppointments()">
                            <mat-form-field class="example-full-width" style="margin-left: 30px;">
                                <mat-label>Select date</mat-label>
                                <input matInput formControlName="date" [matDatepicker]="picker2" [value]="todaysDate" [min]="todaysDate">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                                
                            </mat-form-field> 
                        </form>
                        <button mat-raised-button color="primary" style="margin-right: 10px; position: relative; float: right;" id="button" (click)="searchAppointments()"  >Sarch</button>
                            
                        
                        <div class="container" *ngIf="showSearchResults" id="tableContainer2">
                        <table mat-table [dataSource]="availableAppointments" class="mat-elevation-z8">
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef> No. </th>
                                <td mat-cell *matCellDef="let element; index as i"> {{i+1}} </td>
                                </ng-container>
                                    
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Start time </th>
                                <td mat-cell *matCellDef="let appoinmtent" style="padding: 10px;"> {{appoinmtent.startTime}} </td>
                            </ng-container>
                                    
                            <ng-container matColumnDef="dosage" style="width:100px !important">
                                <th mat-header-cell *matHeaderCellDef> End time </th>
                                
                                <td mat-cell *matCellDef="let appoinmtent" style="padding: 10px;"> {{appoinmtent.endTime}} </td>
                            </ng-container>

                            <ng-container matColumnDef="#" style="margin-left: 80px;">
                                <th mat-header-cell *matHeaderCellDef> # </th>
                                <td mat-cell *matCellDef="let element"> 
                                    <button mat-raised-button color="primary" style="margin-left: 10px;" id="button" (click)="scheduleAppointment()"  >Schedule</button>
                                </td>
                            </ng-container>
                                    
                                    
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </div>


                          
                                

                    </mat-expansion-panel>
                </mat-accordion>
                
                <div>
                    <button mat-raised-button color="primary" id="button" (click)="searchAppointments()"  style="float: right; margin-top: 20px;">Finish counseling</button>
                    <button mat-raised-button color="primary" id="button" (click)="searchAppointments()"  style="float: right; margin-top: 20px; margin-right: 10px;">Didn't show up</button>
                </div>
                </mat-tab>
            </div>
              </mat-tab-group>
        
        </mat-card>


    </mat-drawer-content>
</mat-drawer-container>
